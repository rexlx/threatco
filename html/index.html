<!DOCTYPE html>
    <html lang="en"> 
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link rel="stylesheet" href="./static/bulma.min.css">
            <link rel="stylesheet" href="./static/custom.css">
        </head>
        <body>
           
          <nav class="navbar has-background-black-ter" role="navigation" aria-label="dropdown navigation">
            <div class="navbar-menu">
              <div class="navbar-start">
              
                <div class="navbar-item has-dropdown" id="dropDownMenu">
                  <a class="navbar-link has-text-primary" id="dropDownMenuLink">
                    ThreatPunch
                  </a>
                  
                  <div class="navbar-dropdown has-background-black-ter">
                    <a href="./index.html" class="navbar-item has-background-black-ter has-text-primary">
                        Add User
                      </a>
                      
                      <a href="./table.html" class="navbar-item has-background-black-ter has-text-primary">
                        Chat
                      </a>
                       <!-- Services Page-->
                      <a class="navbar-item has-background-black-ter has-text-primary">
                        Components
                      </a>
                    
                  </div>
                </div>
              </div>
              <!-- <div class="navbar-end">
                <image src="./assets/greenfist2.jpg"></image>
              </div> -->
            </div>
          </nav>
         
            <section class="section has-background-black-ter" style="height: 100vh;">
                <div class="container">
                    <h1 class="title has-text-primary">Add User</h1>
                    <form class="box has-background-black-ter" action="/adduser">
                        <div class="field">
                            <label class="label  has-text-primary" for="email">email:</label>
                            <div class="control">
                                <input class = "input" type="email" id="email" name="email" required/>
                            </div>
                        </div>
            
                        <div class="field">
                            <label class="label  has-text-primary" for="key">password:</label>
                            <div class="control">
                                <input class="input" type="password" id="password" name="password" required/>
                            </div>
                        </div>
            
                        <div class="field">
                            <label class="label  has-text-primary" for="admin">admin:</label>
                            <div class="control">
                                <input type="checkbox" id="admin" name="admin" />
                            </div>
                        </div>
            
                        <div class="field">
                            <div class="control">
                                <button class="button is-primary" type="sumbit">Add User</button>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
        </body>
        <script type="module" src="./js/functions.js"></script>
    </html>


<script>
const dropDownMenu = document.getElementById('dropDownMenu');
const dropDownMenuLink = document.getElementById('dropDownMenuLink');

dropDownMenuLink.addEventListener('click',()=>{
    console.log('hello')
    dropDownMenu.classList.toggle('is-active')
})

</script>
    <!-- <script>
        document.getElementById('addUserForm').addEventListener('submit',function(event){
            event.preventDefault();
            const email = document.getElementById('email').value
            const key = document.getElementById('key').value
            const admin = document.getElementById('admin').value
            const selectedInput = document.getElementById('selected').value
            const selected = {};
            selectedInput.split(',').array.forEach(pair => {
                const [key,value] = pair.split(':');
                if(key && value){
                    selcted[key.trim()] = parseInt(value.trim(),10)
                }
            });
            const userData = {
                email,
                key,
                admin,
                selected,
            };
            fetch('http://localhost:8080/adduser',{
                method: 'POST',
                headers:{
                    'Content-Type': 'application/json',
                    'Authorization': 'admin@aol.com:6953b699-9ee8-4cc2-bd2f-7259f49ff358'
                },
                body: JSON.stringify(userData),
            })
            .then(response => {
                if (response.ok){
                    return response.json();
                }
                throw new Error('Network response was not ok.');
            })
            .then(data => {
                console.log('User added: ',data);
                alert('User added successfully!')
            })    
            .catch(error=> {
                console.error('There was a problem with the fetch operation',error);
            });

        });



    </script> -->